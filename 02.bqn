# ğ•¨ is separator
# ğ•© is string to split
Spâ†{ğ•©âŠ”Ëœ-âŸœ1(ğ•©â‰ ğ•¨)Ã—(1âŠ¸+ +` ğ•©=ğ•¨)}

ParseGameâ†{ ğ•Šğ•© :
  headâ€¿tailâ†':'Sp ğ•©
  idâ†âŠ‘âŒ½' 'Sp head
  gamesâ†(>âŒ½)âš‡Â¯1 (>âŸœ0âˆ˜â‰ Â¨)âŠ¸/âš‡2 (âŒ½' 'âŠ¸Sp)âš‡1 (','âŠ¸Sp)Â¨ ';'Sp tail
  (â€¢ParseFloat id)â‹ˆâ€¢ParseFloatâš‡Â¯2âŒ¾((1âŠ¸âŠ â‰)Â¨) games
}

# ğ•© is the game round. â‰¢ğ•© is âŸ¨n,2âŸ© for nâ‰¤3.
# it should have the label in the left column and the value in the right, like:
# â”Œâ”€            
# â•µ "red"   4   
#   "green" 16  
#   "blue"  6   
#              â”˜
# we produce a âŸ¨3âŸ©-list of values in RGB order
SortGameâ†{
  defaultsâ†â‰"red"â€¿"green"â€¿"blue" â‰ 0â€¿0â€¿0
  sortedâ†(âˆŠ0âŠ¸âŠË˜)âŠ¸/ (âŠË˜(ğ•©âˆ¾defaults))â’âŠ¸âŠ(ğ•©âˆ¾defaults)
  1âŠ¸âŠË˜ sorted
}
# ğ•¨ is a âŸ¨3âŸ©-list of the bag contents in RGB order
# ğ•© is a âŸ¨3âŸ©-list representing the game in RGB order
ValidateGameâ†{0âŠ¸= +Â´ <âŸœ0 ğ•¨-ğ•©}

# Part 1
+Â´ {
  idâ€¿gsâ†ParseGame ğ•©
  gsOkâ†0âŠ¸= +Â´ 1âŠ¸- (12â€¿13â€¿14âŠ¸ValidateGameÂ¨) (SortGameÂ¨ gs)
  idÃ—gsOk
}Â¨ â€¢FLines "02.in"

# Part 2
+Â´ {
  idâ€¿gsâ†ParseGame ğ•©
  Ã—Â´ âŒˆÂ´ SortGameÂ¨ gs
}Â¨ â€¢FLines "02.in"
